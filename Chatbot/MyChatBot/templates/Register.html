{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">

    <title>MummyMate: AI Chatbot</title>
    <link
      rel="icon"
      href="{% static 'images/logo.png' %}"
      type="image/x-icon"
    />
    <link
      href="{% static 'default.css' %}"
      rel="stylesheet"
      type="text/css"
      media="screen"
    />
    <script src="https://kit.fontawesome.com/f4f0cf6a13.js"crossorigin="anonymous"></script>

    <script>
    function validate() {
      var x = document.forms["f1"]["username"].value;
      var y = document.forms["f1"]["password"].value;
      var c = document.forms["f1"]["contact"].value;
      var e = document.forms["f1"]["email"].value;
      var a = document.forms["f1"]["address"].value;
    
      // Username validation
      if (x == null || x == "") {
        alert("Username must be entered");
        document.f1.username.focus();
        return false;
      }
    
      // Password validation
      if (y == null || y == "") { 
        alert("Password must be entered"); 
        document.f1.password.focus(); 
        return false; 
      }
      
      var passwordRegex = /^[a-zA-Z0-9!@#$%^&*()_+=-{};:'<>,./?]{8,}$/;
      
      if (!passwordRegex.test(y)) { 
        alert("Password must be at least 8 characters and and cannot containÂ spaces"); 
        document.f1.password.focus(); 
        return false; 
      }
            
    
      // Contact number validation
      if (c == null || c == "") {
        alert("Contact No must be entered");
        document.f1.contact.focus();
        return false;
      }
      if (isNaN(c)) {
        alert("Please enter a valid contact number");
        document.f1.contact.focus();
        return false;
      }
      if (c.length != 10) {
        alert("Please enter a valid 10-digit contact number");
        document.f1.contact.focus();
        return false;
      }
    
      // Email validation
      if (e == null || e == "") {
        alert("Email ID must be entered");
        document.f1.email.focus();
        return false;
      }
      var emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.(com|org|net|edu|gov)$/;
      if (!emailRegex.test(e)) {
        alert("Enter a valid email address");
        document.f1.email.focus();
        return false;
      }
    
      // Address validation
      if (a == null || a == "") {
        alert("Address must be entered");
        document.f1.address.focus();
        return false;
      }
      
      var addressRegex = /^[a-zA-Z\s]+$/;
      if (!addressRegex.test(a)) {
        alert("Address should contain only letters and spaces");
        document.f1.address.focus();
        return false;

    }

      // After user creation is successful


      window.location.href = '/new-page'
      return true;
    }
    </script>
    
  </head>
  <body>
    <header>
      <div class="logo">MummyMate <i class="fa-regular fa-heart"></i></div>
      <nav>
        <ul class="navbar">
          <li>
            <i class="fa-solid fa-house"></i>
            <a href="{% url 'MyChatBot' %}">Home</a>
          </li>
          <li>
            <i class="fa-regular fa-circle-user"></i>
            <a href="{% url 'User' %}">Login</a>
          </li>
        </ul>
      </nav>
    </header>
    <section class="login">
      <div class="login-container">
        <div class="image-section">
          <img src="./static/images/pic4.jpg" alt="Happy Family" />
        </div>
    <div class="entry-1">
      <h2 class="title"> Sign Up</h2>
      <font size="" color="red"><center>{{ data }}</center></font>
      <form name="f1" method="post" action="{% url 'Signup' %}" onsubmit="return validate()">
        {% csrf_token %}
        <table>
          <tr>
            <th>Username</th>
            <td><input type="text" name="username" class="form-control-1" /></td>
          </tr>
          <tr>
            <th>Password</th>
            <td>
              <input type="password" name="password" class="form-control-1" />
            </td>
          </tr>
          <tr>
            <th>Contact No</th>
            <td><input type="text" name="contact" class="form-control-1" /></td>
          </tr>
          <tr>
            <th>Email ID</th>
            <td><input type="text" name="email" class="form-control-1" /></td>
          </tr>
          <tr>
            <th>Address</th>
            <td><input type="text" name="address" class="form-control-1" /></td>
          </tr>
          <tr>
            <td colspan="2" class="submit-row">
              <input type="submit" value="Register" class="submit-btn" />
            </td>
          </tr>
        </table>
      </form>
    </div>
  </section>
  </body>
</html>
